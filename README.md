Асинхронный Ping‑Pong (Python 3.10, asyncio)

Обзор

Проект реализует TCP‑сервер и два клиента, которые общаются ASCII‑сообщениями, разделёнными переводом строки (\n). Сервер обрабатывает PING/PONG с вероятностью игнора, отвечает с задержкой и периодически рассылает keepalive. Все участники ведут логи строго по требованиям задания.

Протокол (кратко)

- Клиент шлёт: "[N] PING\n", где N — порядковый номер с 0, интервал между сообщениями случайный 300–3000 мс.
- Сервер с вероятностью 90% отвечает через 100–1000 мс: "[R/N] PONG (K)\n"
  - R — сквозной индекс ответа (начинается с 0, общий для всех PONG и keepalive)
  - N — номер запроса клиента
  - K — номер клиента по порядку подключения (начиная с 1)
  - С вероятностью 10% запрос игнорируется — ответа нет
- Каждые 5 секунд сервер всем клиентам шлёт keepalive: "[R] keepalive\n" (тот же сквозной счётчик R)

Форматы логов

- Лог сервера: "YYYY-MM-DD;HH:MM:SS.mmm;текст_запроса;HH:MM:SS.mmm;текст_ответа"
  - Для проигнорированных: последние два поля заменяются на "(проигнорировано)"
- Лог клиента: "YYYY-MM-DD;время_отправки;текст_запроса;время_получения/таймаута;текст_ответа|("(таймаут)")"
  - Для keepalive поля запроса (время_отправки и текст_запроса) пустые
  - Поздние PONG после таймаута не дублируются в логе (на запрос всегда одна строка: ответ ИЛИ таймаут)

Состав

- src/server.py — asyncio TCP‑сервер
- src/client.py — asyncio‑клиент
- scripts/run_all.py — запуск сервера и двух клиентов, автоостановка по таймеру
- logs/ — сохраняемые логи (создаётся автоматически)

Требования

- Python 3.10+

Локальный запуск (Python)

- Полный прогон на 5 минут:
```bash
python3 scripts/run_all.py --duration 300
```
- Короткий прогон на 15 секунд:
```bash
python3 scripts/run_all.py --duration 15
```
Примечание: перед запуском скрипт очищает/пересоздаёт файлы логов.

Команды Makefile

```bash
make run_5m   # прогон на 5 минут
make run_15s  # прогон на 15 секунд
make clean    # удалить logs/*.log
```

Docker

Собрать и запустить 5‑минутный прогон:
```bash
docker build -t async-pingpong .
docker run --rm async-pingpong
```

Оформление репозитория

- LICENSE: MIT
- .gitignore исключает logs/, кеши, venv и т.п.

Где искать логи

- Сервер: logs/server.log
- Клиенты: logs/client1.log, logs/client2.log
